(()=>{"use strict";const e=document.querySelector("#task-name"),t=document.querySelector("#task-desc"),n=document.querySelector("#task-date"),o=document.querySelector("#task-priority"),c=document.querySelector("#task-project"),l=document.querySelector("#task-btn"),a=e=>{const t=r(),n=s(),o=document.querySelector("#content"),c=document.createElement("div");c.classList.add("modal"),c.id="taskModal";const l=document.createElement("div");l.classList.add("modalContent");const a=document.createElement("span");a.classList.add("close"),a.innerText="X";const d=document.createElement("input");d.value=t[e].name,d.id="editingName";const u=document.createElement("input");u.value=t[e].desc,u.id="editingDesc";const m=document.createElement("input");m.type="date",m.value=t[e].date,m.id="editingDate";const y=document.createElement("select"),v=document.createElement("option");v.innerText="Normal";const S=document.createElement("option");S.innerText="Urgent";const g=document.createElement("option");g.innerText="Later",y.append(v,S,g),y.value=t[e].priority,y.id="editingPriority";const k=document.createElement("select");for(let e=0;e<n.length;e+=1){const t=document.createElement("option");t.innerText=n[e].name,k.append(t)}k.value=t[e].project,k.id="editingProject",l.appendChild(k),l.appendChild(y),l.appendChild(m),l.appendChild(u),l.appendChild(d),l.appendChild(a),c.appendChild(l),o.appendChild(c);const q=document.querySelector(".modal");q.style.display="block",a.onclick=()=>{q.style.display="none",c.remove()};const E=document.createElement("button");E.type="button",E.innerText="Delete",l.appendChild(E),E.addEventListener("click",(()=>{(e=>{const t=r();t.splice(e,1),i(t),p()})(e),c.remove()}));const h=document.createElement("button");h.type="button",h.innerText="Save",l.appendChild(h),h.addEventListener("click",(()=>{(e=>{const t=document.querySelector("#editingName"),n=document.querySelector("#editingDesc"),o=document.querySelector("#editingDate"),c=document.querySelector("#editingPriority"),l=document.querySelector("#editingProject"),a=(t.value,n.value,o.value,c.value,void l.value),s=r();s[e]=a,i(s),p()})(e),c.remove()}))},r=()=>{JSON.parse(localStorage.getItem("tasks"))},i=e=>{localStorage.setItem("tasks",JSON.stringify(e))},s=()=>{JSON.parse(localStorage.getItem("projects"))},d=e=>(null===e.value||""===e.value)&&(alert("Please fill the required fields"),!0),u=e=>{const t=e.map((e=>`<div class='d-flex f-column taskWrapper'>\n      <div class='singleTask d-flex'>\n        <div>\n            <h3>${e.name}</h3>\n            <p>${e.date.slice(5)}</p>\n        </div>\n      </div>\n      <div class='hiddenItems'>\n        <p>${e.desc}</p>\n        <p>${e.priority}</p>\n        <p>${e.project}</p>\n      </div>\n    </div>`)).join("\n");document.querySelector("#tasks-container").innerHTML=t,(()=>{const e=document.querySelectorAll(".singleTask");for(let t=0;t<e.length;t+=1){const n=document.createElement("span");n.innerText="edit",n.classList.add("material-icons","editTaskBtn"),n.addEventListener("click",(()=>{a(t)})),e[t].appendChild(n)}})(),(()=>{const e=document.querySelectorAll(".singleTask");for(let t=0;t<e.length;t+=1){const n=document.createElement("span");n.innerText="visibility",n.classList.add("showTaskBtn","material-icons"),e[t].appendChild(n)}})(),(()=>{const e=document.querySelectorAll(".singleTask");for(let t=0;t<e.length;t+=1){const n=document.querySelectorAll(".showTaskBtn");n[t].addEventListener("click",(()=>{const o=e[t].nextElementSibling;"block"===o.style.display?(n[t].innerText="visibility",n[t].classList.add("material-icons"),o.style.display="none"):(n[t].innerText="visibility_off",n[t].classList.add("material-icons"),o.style.display="block")}))}})()},m=new Date,p=()=>{const e=r();u(e)},y=()=>{const e=document.querySelectorAll(".projectBtn");for(let t=0;t<e.length;t+=1)e[t].addEventListener("click",(()=>{var n;0!==(n=JSON.parse(localStorage.getItem("tasks")).filter((n=>{if(n.project===e[t].innerText)return n}))).length?u(n):document.querySelector("#tasks-container").innerHTML="<h2>No tasks created</h2>"}))},v=document.querySelector("#project-btn"),S=document.querySelector("#new-project"),g=()=>{const e=s().map((e=>`<button class='projectBtn' >${e.name}</button>`)).join("\n");document.querySelector("#projects-container").innerHTML=e},k=()=>{const e=s(),t=document.querySelector("#task-project"),n=e.map((e=>`<option id='${e.name}'>${e.name}</option>`));t.innerHTML=n};window.addEventListener("load",(()=>{null===JSON.parse(localStorage.getItem("projects"))&&localStorage.setItem("projects",JSON.stringify([{name:"Inbox"}])),null===JSON.parse(localStorage.getItem("tasks"))&&localStorage.setItem("tasks",JSON.stringify([])),g(),p(),k(),v.addEventListener("click",(()=>{d(S)||((e=>{const t=e,n=s();n.push(t),(e=>{localStorage.setItem("projects",JSON.stringify(e))})(n),S.value=""})(S.value),g(),k(),y())})),l.addEventListener("click",(()=>{d(e)||(((c,l,a,s,d)=>{const u=r();u.push(void 0),i(u),e.value="",t.value="",n.value="",o.value=""})(e.value,t.value,n.value,o.value,c.value),p())})),y(),(()=>{const e=document.querySelector("#openProjectModal"),t=document.querySelector(".projectModal");e.addEventListener("click",(()=>{t.style.display="block"})),document.querySelector(".closeProject").addEventListener("click",(()=>{t.style.display="none"}))})(),(()=>{const e=document.querySelector("#openTaskModal"),t=document.querySelector(".taskModal");e.addEventListener("click",(()=>{t.style.display="block"})),document.querySelector(".closeTask").addEventListener("click",(()=>{t.style.display="none"}))})(),document.querySelector("#pastBtn").addEventListener("click",(()=>{(()=>{const e=r().filter((e=>e.date.slice(8)<m.getDate().toString()&&e.date.slice(5,7)<(m.getMonth()+1).toString()||e.date.slice(0,4)<m.getFullYear()));u(e)})()})),document.querySelector("#todayBtn").addEventListener("click",(()=>{(()=>{const e=r().filter((e=>e.date.slice(8)===m.getDate().toString()));u(e)})()})),document.querySelector("#allBtn").addEventListener("click",(()=>{p()}))}))})();
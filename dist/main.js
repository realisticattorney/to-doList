(()=>{"use strict";const e=()=>JSON.parse(localStorage.getItem("tasks")),t=e=>{localStorage.setItem("tasks",JSON.stringify(e))},n=()=>JSON.parse(localStorage.getItem("projects")),o=e=>(null===e.value||""===e.value)&&(alert("Please fill the required fields"),!0),c=()=>{const t=e();p(t)},l=document.querySelector("#task-name"),a=document.querySelector("#task-desc"),r=document.querySelector("#task-date"),s=document.querySelector("#task-priority"),i=document.querySelector("#task-project"),d=document.querySelector("#task-btn"),u=(e,t,n,o,c)=>({name:e,desc:t,date:n,priority:o,project:c}),m=o=>{const l=e(),a=n(),r=document.querySelector("#content"),s=document.createElement("div");s.classList.add("modal"),s.id="taskModal";const i=document.createElement("div");i.classList.add("modalContent");const d=document.createElement("span");d.classList.add("close"),d.innerText="X";const m=document.createElement("input");m.value=l[o].name,m.id="editingName";const p=document.createElement("input");p.value=l[o].desc,p.id="editingDesc";const y=document.createElement("input");y.type="date",y.value=l[o].date,y.id="editingDate";const S=document.createElement("select"),v=document.createElement("option");v.innerText="Normal";const g=document.createElement("option");g.innerText="Urgent";const k=document.createElement("option");k.innerText="Later",S.append(v,g,k),S.value=l[o].priority,S.id="editingPriority";const q=document.createElement("select");for(let e=0;e<a.length;e+=1){const t=document.createElement("option");t.innerText=a[e].name,q.append(t)}q.value=l[o].project,q.id="editingProject",i.appendChild(q),i.appendChild(S),i.appendChild(y),i.appendChild(p),i.appendChild(m),i.appendChild(d),s.appendChild(i),r.appendChild(s);const E=document.querySelector(".modal");E.style.display="block",d.onclick=()=>{E.style.display="none",s.remove()};const h=document.createElement("button");h.type="button",h.innerText="Delete",i.appendChild(h),h.addEventListener("click",(()=>{(n=>{const o=e();o.splice(n,1),t(o),c()})(o),s.remove()}));const L=document.createElement("button");L.type="button",L.innerText="Save",i.appendChild(L),L.addEventListener("click",(()=>{(n=>{const o=document.querySelector("#editingName"),l=document.querySelector("#editingDesc"),a=document.querySelector("#editingDate"),r=document.querySelector("#editingPriority"),s=document.querySelector("#editingProject"),i=u(o.value,l.value,a.value,r.value,s.value),d=e();d[n]=i,t(d),c()})(o),s.remove()}))},p=e=>{const t=e.map((e=>`<div class='d-flex f-column taskWrapper'>\n      <div class='singleTask d-flex'>\n        <div>\n            <h3>${e.name}</h3>\n            <p>${e.date.slice(5)}</p>\n        </div>\n      </div>\n      <div class='hiddenItems'>\n        <p>${e.desc}</p>\n        <p>${e.priority}</p>\n        <p>${e.project}</p>\n      </div>\n    </div>`)).join("\n");document.querySelector("#tasks-container").innerHTML=t,(()=>{const e=document.querySelectorAll(".singleTask");for(let t=0;t<e.length;t+=1){const n=document.createElement("span");n.innerText="edit",n.classList.add("material-icons","editTaskBtn"),n.addEventListener("click",(()=>{m(t)})),e[t].appendChild(n)}})(),(()=>{const e=document.querySelectorAll(".singleTask");for(let t=0;t<e.length;t+=1){const n=document.createElement("span");n.innerText="visibility",n.classList.add("showTaskBtn","material-icons"),e[t].appendChild(n)}})(),(()=>{const e=document.querySelectorAll(".singleTask");for(let t=0;t<e.length;t+=1){const n=document.querySelectorAll(".showTaskBtn");n[t].addEventListener("click",(()=>{const o=e[t].nextElementSibling;"block"===o.style.display?(n[t].innerText="visibility",n[t].classList.add("material-icons"),o.style.display="none"):(n[t].innerText="visibility_off",n[t].classList.add("material-icons"),o.style.display="block")}))}})()},y=new Date,S=()=>{const t=e();p(t)},v=()=>{const e=document.querySelectorAll(".projectBtn");for(let t=0;t<e.length;t+=1)e[t].addEventListener("click",(()=>{const n=JSON.parse(localStorage.getItem("tasks")).filter((n=>{if(n.project===e[t].innerText)return n}));var o;console.log(n),0!==(o=n).length?p(o):document.querySelector("#tasks-container").innerHTML="<h2>No tasks created</h2>"}))},g=document.querySelector("#project-btn"),k=document.querySelector("#new-project"),q=()=>{const e=n().map((e=>`<button class='projectBtn' >${e.name}</button>`)).join("\n");document.querySelector("#projects-container").innerHTML=e},E=()=>{const e=n(),t=document.querySelector("#task-project"),o=e.map((e=>`<option id='${e.name}'>${e.name}</option>`));t.innerHTML=o};window.addEventListener("load",(()=>{null===JSON.parse(localStorage.getItem("projects"))&&localStorage.setItem("projects",JSON.stringify([{name:"Inbox"}])),null===JSON.parse(localStorage.getItem("tasks"))&&localStorage.setItem("tasks",JSON.stringify([])),q(),S(),E(),g.addEventListener("click",(()=>{o(k)||((e=>{const t=e,o=n();o.push(t),(e=>{localStorage.setItem("projects",JSON.stringify(e))})(o),k.value=""})(k.value),q(),E(),v())})),d.addEventListener("click",(()=>{o(l)||(((n,o,c,i,d)=>{const m=u(n,o,c,i,d),p=e();p.push(m),t(p),l.value="",a.value="",r.value="",s.value=""})(l.value,a.value,r.value,s.value,i.value),c())})),v(),(()=>{const e=document.querySelector("#openProjectModal"),t=document.querySelector(".projectModal");e.addEventListener("click",(()=>{t.style.display="block"})),document.querySelector(".closeProject").addEventListener("click",(()=>{t.style.display="none"}))})(),(()=>{const e=document.querySelector("#openTaskModal"),t=document.querySelector(".taskModal");e.addEventListener("click",(()=>{t.style.display="block"})),document.querySelector(".closeTask").addEventListener("click",(()=>{t.style.display="none"}))})(),document.querySelector("#pastBtn").addEventListener("click",(()=>{(()=>{const t=e().filter((e=>e.date.slice(8)<y.getDate().toString()&&e.date.slice(5,7)<(y.getMonth()+1).toString()||e.date.slice(0,4)<y.getFullYear()));p(t)})()})),document.querySelector("#todayBtn").addEventListener("click",(()=>{(()=>{const t=e().filter((e=>e.date.slice(8)===y.getDate().toString()&&e.date.slice(5,7)===(y.getMonth()+1).toString()));p(t)})()})),document.querySelector("#allBtn").addEventListener("click",(()=>{S()}))}))})();
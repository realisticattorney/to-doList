(()=>{"use strict";const e=()=>JSON.parse(localStorage.getItem("tasks")),t=e=>{localStorage.setItem("tasks",JSON.stringify(e))},n=()=>JSON.parse(localStorage.getItem("projects")),c=e=>{if(null===e.value||""===e.value)return alert("Please fill the required fields"),!0},o=document.querySelector("#task-name"),l=document.querySelector("#task-desc"),a=document.querySelector("#task-date"),d=document.querySelector("#task-priority"),i=document.querySelector("#task-project"),s=document.querySelector("#task-btn"),r=(e,t,n,c,o)=>({name:e,desc:t,date:n,priority:c,project:o}),p=()=>{const t=e().map((e=>`<div class='d-flex f-column taskWrapper'>\n      <div class='singleTask d-flex'>\n        <div>\n            <h3>${e.name}</h3>\n            <p>${e.date.slice(5)}</p>\n        </div>\n      </div>\n      <div class='hiddenItems'>\n        <p>${e.desc}</p>\n        <p>${e.priority}</p>\n        <p>${e.project}</p>\n      </div>\n    </div>`)).join("\n");document.querySelector("#tasks-container").innerHTML=t,v(),u(),m()},u=()=>{const e=document.querySelectorAll(".singleTask");for(let t=0;t<e.length;t+=1){const n=document.createElement("span");n.innerText="show",n.classList.add("showTaskBtn"),e[t].appendChild(n)}},m=()=>{const e=document.querySelectorAll(".singleTask");for(let t=0;t<e.length;t++){const n=document.querySelectorAll(".showTaskBtn");n[t].addEventListener("click",(()=>{const c=e[t].nextElementSibling;"block"===c.style.display?(n[t].innerText="show",c.style.display="none"):(n[t].innerText="hide",c.style.display="block")}))}},v=()=>{const e=document.querySelectorAll(".singleTask");for(let t=0;t<e.length;t+=1){const n=document.createElement("span");n.innerText="edit",n.classList.add("material-icons","editTaskBtn"),n.addEventListener("click",(()=>{y(t)})),e[t].appendChild(n)}},y=c=>{const o=e(),l=n(),a=document.querySelector("#content"),d=document.createElement("div");d.classList.add("modal"),d.id="taskModal";const i=document.createElement("div");i.classList.add("modalContent");const s=document.createElement("span");s.classList.add("close"),s.innerText="X";const r=document.createElement("input");r.value=o[c].name,r.id="editingName";const u=document.createElement("input");u.value=o[c].desc,u.id="editingDesc";const m=document.createElement("input");m.type="date",m.value=o[c].date,m.id="editingDate";const v=document.createElement("select"),y=document.createElement("option");y.innerText="Normal";const k=document.createElement("option");k.innerText="Urgent";const g=document.createElement("option");g.innerText="Later",v.append(y,k,g),v.value=o[c].priority,v.id="editingPriority";const h=document.createElement("select");for(let e=0;e<l.length;e+=1){const t=document.createElement("option");t.innerText=l[e].name,h.append(t)}h.value=o[c].project,h.id="editingProject",i.appendChild(h),i.appendChild(v),i.appendChild(m),i.appendChild(u),i.appendChild(r),i.appendChild(s),d.appendChild(i),a.appendChild(d);const q=document.querySelector(".modal");q.style.display="block",s.onclick=()=>{q.style.display="none",d.remove()};const T=document.createElement("button");T.type="button",T.innerText="Delete",i.appendChild(T),T.addEventListener("click",(()=>{(n=>{const c=e();c.splice(n,1),t(c),p()})(c),d.remove()}));const E=document.createElement("button");E.type="button",E.innerText="Save",i.appendChild(E),E.addEventListener("click",(()=>{S(c),d.remove()}))},S=n=>{const c=document.querySelector("#editingName"),o=document.querySelector("#editingDesc"),l=document.querySelector("#editingDate"),a=document.querySelector("#editingPriority"),d=document.querySelector("#editingProject"),i=r(c.value,o.value,l.value,a.value,d.value),s=e();s[n]=i,t(s),p()},k=new Date,g=e=>{if(0===e.length)return void(document.querySelector("#tasks-container").innerHTML="<h2>No tasks created</h2>");const t=e.map((e=>`<div class='singleTask d-flex'>\n      <div>\n        <h3>${e.name}</h3>\n        <p>${e.date.slice(5)}</p>\n        </div>\n      </div>`)).join("\n");document.querySelector("#tasks-container").innerHTML=t,v()},h=()=>{const e=document.querySelectorAll(".projectBtn");for(let t=0;t<e.length;t+=1)e[t].addEventListener("click",(()=>{const n=JSON.parse(localStorage.getItem("tasks")).filter((n=>{if(n.project==e[t].innerText)return n}));g(n)}))},q=document.querySelector("#project-btn"),T=document.querySelector("#new-project"),E=()=>{const e=n().map((e=>`<button class='projectBtn' >${e.name}</button>`)).join("\n");document.querySelector("#projects-container").innerHTML=e},f=()=>{const e=n(),t=document.querySelector("#task-project"),c=e.map((e=>`<option id='${e.name}'>${e.name}</option>`));t.innerHTML=c};window.addEventListener("load",(()=>{null===JSON.parse(localStorage.getItem("projects"))&&localStorage.setItem("projects",JSON.stringify([{name:"Inbox"}])),null===JSON.parse(localStorage.getItem("tasks"))&&localStorage.setItem("tasks",JSON.stringify(new Array)),E(),p(),f(),q.addEventListener("click",(()=>{c(T)||((e=>{const t=(e=>({name:e}))(e),c=n();c.push(t),(e=>{localStorage.setItem("projects",JSON.stringify(e))})(c),T.value=""})(T.value),E(),f(),h())})),s.addEventListener("click",(()=>{c(o)||(((n,c,i,s,p)=>{const u=r(n,c,i,s,p),m=e();m.push(u),t(m),o.value="",l.value="",a.value="",d.value=""})(o.value,l.value,a.value,d.value,i.value),p())})),h(),(()=>{const e=document.querySelector("#openProjectModal"),t=document.querySelector(".projectModal");e.addEventListener("click",(()=>{t.style.display="block"})),document.querySelector(".closeProject").addEventListener("click",(()=>{t.style.display="none"}))})(),(()=>{const e=document.querySelector("#openTaskModal"),t=document.querySelector(".taskModal");e.addEventListener("click",(()=>{t.style.display="block"})),document.querySelector(".closeTask").addEventListener("click",(()=>{t.style.display="none"}))})(),document.querySelector("#pastBtn").addEventListener("click",(()=>{(()=>{const t=e().filter((e=>e.date.slice(8)<k.getDate().toString()&&e.date.slice(5,7)<(k.getMonth()+1).toString()||e.date.slice(0,4)<k.getFullYear())).map((e=>`<div class='d-flex f-column taskWrapper'>\n      <div class='singleTask d-flex'>\n        <div>\n            <h3>${e.name}</h3>\n            <p>${e.date.slice(5)}</p>\n        </div>\n      </div>\n      <div class='hiddenItems'>\n        <p>${e.desc}</p>\n        <p>${e.priority}</p>\n        <p>${e.project}</p>\n      </div>\n    </div>`)).join("\n");document.querySelector("#tasks-container").innerHTML=t,v(),u(),m()})()})),document.querySelector("#todayBtn").addEventListener("click",(()=>{(()=>{const t=e().filter((e=>e.date.slice(8)===k.getDate().toString())).map((e=>`<div class='d-flex f-column taskWrapper'>\n      <div class='singleTask d-flex'>\n        <div>\n            <h3>${e.name}</h3>\n            <p>${e.date.slice(5)}</p>\n        </div>\n      </div>\n      <div class='hiddenItems'>\n        <p>${e.desc}</p>\n        <p>${e.priority}</p>\n        <p>${e.project}</p>\n      </div>\n    </div>`)).join("\n");document.querySelector("#tasks-container").innerHTML=t,v(),u(),m()})()})),document.querySelector("#allBtn").addEventListener("click",(()=>{(()=>{const t=e().map((e=>`<div class='d-flex f-column taskWrapper'>\n      <div class='singleTask d-flex'>\n        <div>\n            <h3>${e.name}</h3>\n            <p>${e.date.slice(5)}</p>\n        </div>\n      </div>\n      <div class='hiddenItems'>\n        <p>${e.desc}</p>\n        <p>${e.priority}</p>\n        <p>${e.project}</p>\n      </div>\n    </div>`)).join("\n");document.querySelector("#tasks-container").innerHTML=t,v(),u(),m()})()}))}))})();
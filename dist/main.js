(()=>{"use strict";const e=()=>JSON.parse(localStorage.getItem("tasks")),t=e=>{localStorage.setItem("tasks",JSON.stringify(e))},n=()=>JSON.parse(localStorage.getItem("projects")),o=e=>{if(null===e.value||""===e.value)return alert("Please fill the required fields"),!0},c=document.querySelector("#task-name"),a=document.querySelector("#task-desc"),l=document.querySelector("#task-date"),r=document.querySelector("#task-priority"),d=document.querySelector("#task-project"),i=document.querySelector("#task-btn"),s=(e,t,n,o,c)=>({name:e,desc:t,date:n,priority:o,project:c}),u=()=>{const t=e().map((e=>`<div class='singleTask d-flex'>\n      <div>\n        <h3>${e.name}</h3>\n        <p>${e.date.slice(5)}</p>\n        </div>\n      </div>`)).join("\n");document.querySelector("#tasks-container").innerHTML=t,m()},m=()=>{const e=document.querySelectorAll(".singleTask");for(let t=0;t<e.length;t+=1){const n=document.createElement("span");n.innerText="edit",n.classList.add("material-icons","editTaskBtn"),n.addEventListener("click",(()=>{p(t)})),e[t].appendChild(n)}},p=o=>{const c=e(),a=n(),l=document.querySelector("#content"),r=document.createElement("div");r.classList.add("modal"),r.id="taskModal";const d=document.createElement("div");d.classList.add("modalContent");const i=document.createElement("span");i.classList.add("close"),i.innerText="X";const s=document.createElement("input");s.value=c[o].name,s.id="editingName";const m=document.createElement("input");m.value=c[o].desc,m.id="editingDesc";const p=document.createElement("input");p.type="date",p.value=c[o].date,p.id="editingDate";const v=document.createElement("select"),S=document.createElement("option");S.innerText="Normal";const k=document.createElement("option");k.innerText="Urgent";const g=document.createElement("option");g.innerText="Later",v.append(S,k,g),v.value=c[o].priority,v.id="editingPriority";const q=document.createElement("select");for(let e=0;e<a.length;e+=1){const t=document.createElement("option");t.innerText=a[e].name,q.append(t)}q.value=c[o].project,q.id="editingProject",d.appendChild(q),d.appendChild(v),d.appendChild(p),d.appendChild(m),d.appendChild(s),d.appendChild(i),r.appendChild(d),l.appendChild(r);const E=document.querySelector(".modal");E.style.display="block",i.onclick=()=>{E.style.display="none",r.remove()};const h=document.createElement("button");h.type="button",h.innerText="Delete",d.appendChild(h),h.addEventListener("click",(()=>{(n=>{const o=e();o.splice(n,1),t(o),u()})(o),r.remove()}));const j=document.createElement("button");j.type="button",j.innerText="Save",d.appendChild(j),j.addEventListener("click",(()=>{y(o),r.remove()}))},y=n=>{const o=document.querySelector("#editingName"),c=document.querySelector("#editingDesc"),a=document.querySelector("#editingDate"),l=document.querySelector("#editingPriority"),r=document.querySelector("#editingProject"),d=s(o.value,c.value,a.value,l.value,r.value),i=e();i[n]=d,t(i),u()},v=e=>{if(0===e.length)return void(document.querySelector("#tasks-container").innerHTML="<h2>No tasks created</h2>");const t=e.map((e=>`<div class='singleTask'>\n      <h3>${e.name}</h3>\n    </div>`)).join("\n");document.querySelector("#tasks-container").innerHTML=t,m()},S=()=>{const e=document.querySelectorAll(".projectBtn");for(let t=0;t<e.length;t+=1)e[t].addEventListener("click",(()=>{const n=JSON.parse(localStorage.getItem("tasks")).filter((n=>{if(n.project==e[t].innerText)return n}));v(n)}))},k=document.querySelector("#project-btn"),g=document.querySelector("#new-project"),q=()=>{const e=n().map((e=>`<button class='projectBtn' >${e.name}</button>`)).join("\n");document.querySelector("#projects-container").innerHTML=e},E=()=>{const e=n(),t=document.querySelector("#task-project"),o=e.map((e=>`<option id='${e.name}'>${e.name}</option>`));t.innerHTML=o};window.addEventListener("load",(()=>{null===JSON.parse(localStorage.getItem("projects"))&&localStorage.setItem("projects",JSON.stringify([{name:"Inbox"}])),null===JSON.parse(localStorage.getItem("tasks"))&&localStorage.setItem("tasks",JSON.stringify(new Array)),q(),u(),E(),k.addEventListener("click",(()=>{o(g)||((e=>{const t=(e=>({name:e}))(e),o=n();o.push(t),(e=>{localStorage.setItem("projects",JSON.stringify(e))})(o),g.value=""})(g.value),q(),E(),S())})),i.addEventListener("click",(()=>{o(c)||(((n,o,d,i,u)=>{const m=s(n,o,d,i,u),p=e();p.push(m),t(p),c.value="",a.value="",l.value="",r.value=""})(c.value,a.value,l.value,r.value,d.value),u())})),S(),(()=>{const e=document.querySelector("#openProjectModal"),t=document.querySelector(".projectModal");e.addEventListener("click",(()=>{t.style.display="block"})),document.querySelector(".closeProject").addEventListener("click",(()=>{t.style.display="none"}))})(),(()=>{const e=document.querySelector("#openTaskModal"),t=document.querySelector(".taskModal");e.addEventListener("click",(()=>{t.style.display="block"})),document.querySelector(".closeTask").addEventListener("click",(()=>{t.style.display="none"}))})()}))})();
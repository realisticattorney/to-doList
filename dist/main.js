(()=>{"use strict";const e=e=>{if(0===e.length)return void(document.querySelector("#tasks-container").innerHTML="<h2>No tasks created</h2>");const t=e.map(((e,t)=>`<div class='singleTask'>\n      <h3>${e.name}</h3>\n      <input class='task-input editing' value=${e.name}>\n      <p>${e.desc}</p>\n      <input class='task-input editing' value=${e.desc}>\n      <p>${e.priority}</p>\n      <input class='task-input editing' value=${e.priority}>\n      <p>${e.date}</p>\n      <input class='task-input editing' type='date' value=${e.date}>\n\n      <button id='edit-btn' type='button' onClick='editTask()'>Edit</button>\n      \n      <button class='task-input editing' type='button'>Save</button>\n\n      <button class='task-input editing' type='button' onClick='deleteTask(${t})'>Delete</button>\n    </div>`)).join("\n");document.querySelector("#tasks-container").innerHTML=t},t=()=>{const t=document.querySelectorAll(".projectBtn");for(let n=0;n<t.length;n+=1)t[n].addEventListener("click",(()=>{const o=JSON.parse(localStorage.getItem("tasks")).filter((e=>{if(e.project==t[n].innerText)return e}));e(o)}))},n=()=>JSON.parse(localStorage.getItem("tasks")),o=e=>{localStorage.setItem("tasks",JSON.stringify(e))},a=()=>JSON.parse(localStorage.getItem("projects")),c=e=>{if(null===e.value||""===e.value)return alert("Please fill the required fields"),!0},r=document.querySelector("#project-btn"),i=document.querySelector("#new-project"),l=()=>{const e=a().map((e=>`<button class='projectBtn' >${e.name}</button>`)).join("\n");document.querySelector("#projects-container").innerHTML=e},s=()=>{const e=JSON.parse(localStorage.getItem("projects")),t=document.querySelector("#task-project"),n=e.map((e=>`<option id='${e.name}'>${e.name}</option>`));t.innerHTML=n},d=document.querySelector("#task-name"),u=document.querySelector("#task-desc"),p=document.querySelector("#task-date"),m=document.querySelector("#task-priority"),v=document.querySelector("#task-project"),y=document.querySelector("#task-btn"),g=(e,t,n,o,a)=>({name:e,desc:t,date:n,priority:o,project:a}),S=()=>{const e=n().map(((e,t)=>`<div class='singleTask'>\n      <h3>${e.name}</h3>\n      <p>${e.desc}</p>\n      <p>${e.priority}</p>\n      <p>${e.date}</p>\n      <p>${e.project}</p>\n    </div>`)).join("\n");document.querySelector("#tasks-container").innerHTML=e,k()},k=()=>{const e=document.querySelectorAll(".singleTask");for(let t=0;t<e.length;t+=1){const n=document.createElement("button");n.innerText="Edit",n.type="button",n.addEventListener("click",(()=>{h(t)})),e[t].appendChild(n)}},h=e=>{const t=n(),c=a(),r=document.querySelector("#content"),i=document.createElement("div");i.classList.add("modal"),i.id="taskModal";const l=document.createElement("div");l.classList.add("modalContent");const s=document.createElement("span");s.classList.add("close"),s.innerText="X";const d=document.createElement("input");d.value=t[e].name,d.id="editingName";const u=document.createElement("input");u.value=t[e].desc,u.id="editingDesc";const p=document.createElement("input");p.type="date",p.value=t[e].date,p.id="editingDate";const m=document.createElement("select"),v=document.createElement("option");v.innerText="Normal";const y=document.createElement("option");y.innerText="Urgent";const g=document.createElement("option");g.innerText="Later",m.append(v,y,g),m.value=t[e].priority,m.id="editingPriority";const k=document.createElement("select");for(let e=0;e<c.length;e+=1){const t=document.createElement("option");t.innerText=c[e].name,k.append(t)}k.value=t[e].project,k.id="editingProject",l.appendChild(k),l.appendChild(m),l.appendChild(p),l.appendChild(u),l.appendChild(d),l.appendChild(s),i.appendChild(l),r.appendChild(i);const h=document.querySelector(".modal");h.style.display="block",s.onclick=()=>{h.style.display="none",i.remove()};const q=document.createElement("button");q.type="button",q.innerText="Delete",l.appendChild(q),q.addEventListener("click",(()=>{(e=>{const t=n();t.splice(e,1),o(t),S()})(e),i.remove()}));const b=document.createElement("button");b.type="button",b.innerText="Save",l.appendChild(b),b.addEventListener("click",(()=>{E(e),i.remove()}))},E=e=>{const t=document.querySelector("#editingName"),a=document.querySelector("#editingDesc"),c=document.querySelector("#editingDate"),r=document.querySelector("#editingPriority"),i=document.querySelector("#editingProject"),l=g(t.value,a.value,c.value,r.value,i.value),s=n();s[e]=l,o(s),S()};window.addEventListener("load",(()=>{null===JSON.parse(localStorage.getItem("projects"))&&localStorage.setItem("projects",JSON.stringify([{name:"Inbox"}])),null===JSON.parse(localStorage.getItem("tasks"))&&localStorage.setItem("tasks",JSON.stringify(new Array)),l(),S(),s(),r.addEventListener("click",(()=>{c(i)||((e=>{const t=(e=>({name:e}))(e),n=a();var o;n.push(t),o=n,localStorage.setItem("projects",JSON.stringify(o)),i.value=""})(i.value),l(),s(),t())})),y.addEventListener("click",(()=>{c(d)||(((e,t,a,c,r)=>{const i=g(e,t,a,c,r),l=n();l.push(i),o(l),d.value="",u.value="",p.value="",m.value=""})(d.value,u.value,p.value,m.value,v.value),S())})),t()}))})();